<!DOCTYPE html>
<html>
<head>
  <title>chapatt-web-widget-tk - Specimen Sheet</title>

  <link rel="stylesheet" type="text/css" href="chapatt-web-widget-tk/example.css" />

  <script type="text/javascript" src="chapatt-web-widget-tk/chapatt-web-widget-tk.js"></script>

  <script type="text/javascript" src="getEmPixels/getEmPixels.min.js"></script>

  <script type="text/javascript">
    function referenceTaperRout(rRef, rRefTaper, x) {
        if (x < 0.5)
            return rRef * ((rRefTaper / 0.5) * x);
        else
            return rRef * ((((1 - rRefTaper) / 0.5) * x) + (rRefTaper - (1 - rRefTaper)));
    }
    function referenceTaperRin(rRef, x) {
        return rRef;
    }
    function referenceTaperVout(rRef, rRefTaper, x) {
        if (x < 0.5)
            return ((1 - rRefTaper) / 0.5) * x;
        else
            return ((rRefTaper / 0.5) * x) + ((1 - rRefTaper) - rRefTaper);
    }
    function myTaperRout(rPot, rTaper1, rTaper2, x) {
        return 1 / ((1 / (rPot * x)) + (1 / rTaper1));
    }
    function myTaperRin(rPot, rTaper1, rTaper2, x) {
        return (1 / ((1 / (rPot * (1 - x))) + (1 / rTaper2))) +
            myTaperRout(rPot, rTaper1, rTaper2, x);
    }
    function myTaperVout(rPot, rTaper1, rTaper2, x) {
        rout = myTaperRout(rPot, rTaper1, rTaper2, x);
        rin = myTaperRin(rPot, rTaper1, rTaper2, x);
        return rout / rin;
    }

    document.addEventListener('DOMContentLoaded', function() {
        function plot(fns, cursorX) {
            var canvas = document.getElementById("chart");
            var ctx = canvas.getContext("2d");
            var chartProperties = {};

            chartProperties.marginLeft = 50;
            chartProperties.marginRight = 200;
            chartProperties.marginTop = 50;
            chartProperties.marginBottom = 50;
            chartProperties.plotX0 = chartProperties.marginLeft;
            chartProperties.plotXMax = canvas.width - chartProperties.marginRight;
            chartProperties.w = chartProperties.plotXMax - chartProperties.plotX0;
            chartProperties.plotY0 = canvas.height - chartProperties.marginBottom;
            chartProperties.plotYMax = chartProperties.marginTop;
            chartProperties.h = chartProperties.plotY0 - chartProperties.plotYMax;

            chartProperties.plotXScale = chartProperties.w;

            chartProperties.plotYScaleNames = [];
            chartProperties.fnsIndicesByPlotYScale = []; // parallel to plotYScaleNames
            fns.forEach(function(item, index) {
                if (chartProperties.plotYScaleNames.includes(item.yScale)) {
                    chartProperties.fnsIndicesByPlotYScale[chartProperties.plotYScaleNames.indexOf(item.yScale)].push(index);
                } else {
                    chartProperties.plotYScaleNames.push(item.yScale);
                    chartProperties.fnsIndicesByPlotYScale[chartProperties.plotYScaleNames.indexOf(item.yScale)] = [];
                    chartProperties.fnsIndicesByPlotYScale[chartProperties.plotYScaleNames.indexOf(item.yScale)].push(index);
                }
            });

            // parallel to fns
            chartProperties.fnsPoints = fns.map(function(item) {
                var points = [];

                for (var i=1; chartProperties.plotX0 + i <= chartProperties.plotXMax; ++i) {
                    points.push(item.fn(i / chartProperties.plotXScale));
                }

                return points;
            });

            // parallel to fns
            chartProperties.fnsMax = chartProperties.fnsPoints.map(function(item) {
                return Math.max.apply(null, item);
            });

            chartProperties.fnsMaxByPlotYScale = chartProperties.fnsIndicesByPlotYScale.map(function(item) {
                var fnsMaxYScale = [];

                item.forEach(function(item) {
                    fnsMaxYScale.push(chartProperties.fnsMax[item]);
                });

                return fnsMaxYScale;
            });

            // parallel to plotYScaleNames
            chartProperties.plotYScales = chartProperties.fnsMaxByPlotYScale.map(function(item) {
                return chartProperties.h / Math.max.apply(null, item); 
            });

            chartProperties.cursorLineWidth = 1;
            chartProperties.graphLineWidth = 2;
            chartProperties.fontSize = getEmPixels();

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            plotAxes(ctx, chartProperties, 'Fraction of Full Rotation', 'Resistance');
            plotFns(ctx, chartProperties, fns);
            plotCursor(ctx, chartProperties, fns, cursorX, chartProperties.marginTop);
            plotLegend(ctx, chartProperties, fns, chartProperties.marginTop + (chartProperties.h / 2));
        }

        function plotLegend(ctx, chartProperties, fns, legendPlotY) {
            ctx.save();

            var fontSize = chartProperties.fontSize;
            var lineSpacing = fontSize;
            var left = chartProperties.plotXMax + 10;

            ctx.font = fontSize.toString() + 'px sans-serif';
            ctx.fillStyle = 'rgb(0, 0, 0)';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'top';
            ctx.lineWidth = chartProperties.graphLineWidth;

            fns.forEach(function (item, index) {
                ctx.fillText(item.name, left + (1.5 * fontSize), legendPlotY + (index * lineSpacing));
                ctx.beginPath();
                ctx.moveTo(left, Math.round(legendPlotY + (index * lineSpacing)) + (fontSize / 2));
                ctx.lineTo(left + fontSize, Math.round(legendPlotY + (index * lineSpacing)) + (fontSize / 2));
                ctx.strokeStyle = item.color; 
                ctx.setLineDash(item.dash);
                ctx.stroke();
            });

            ctx.restore();
        }

        function plotCursor(ctx, chartProperties, fns, cursorX, legendPlotY) {
            ctx.save();

            function roundToDecimalPlaces(x, places) {
                var roundScale = Math.pow(10, places);
                return Math.round(roundScale * x) / roundScale;
            }

            var cursorPointRadius = 4;
            var cursorPlotX = chartProperties.plotX0 + (chartProperties.w * cursorX);
            var cursorPlotYs = [];
            fns.forEach(function(item) {
               cursorPlotYs.push(chartProperties.plotY0 - (chartProperties.plotYScales[chartProperties.plotYScaleNames.indexOf(item.yScale)] * item.fn(cursorX)));
            });
            var cursorPlotYMax = Math.min.apply(null, cursorPlotYs);

            ctx.strokeStyle = 'rgb(200, 200, 200)'; 
            ctx.lineWidth = chartProperties.cursorLineWidth;

            // draw horizontal lines
            cursorPlotYs.forEach(function(item) {
                ctx.beginPath();
                ctx.moveTo(chartProperties.plotX0, item);
                ctx.lineTo(cursorPlotX, item);
                ctx.stroke();
            });

            // draw vertical line
            ctx.beginPath();
            ctx.moveTo(cursorPlotX, chartProperties.plotY0);
            ctx.lineTo(cursorPlotX, cursorPlotYMax);
            ctx.stroke();

            // draw points
            cursorPlotYs.forEach(function(item, index) {
                ctx.beginPath();
                ctx.fillStyle = fns[index].color;
                ctx.arc(cursorPlotX, item, cursorPointRadius, 0, 2 * Math.PI, false);
                ctx.fillStyle = fns[index].pointFill;
                ctx.fill();
                ctx.strokeStyle = fns[index].color; 
                ctx.lineWidth = chartProperties.graphLineWidth;
                ctx.setLineDash(fns[index].pointDash);
                ctx.stroke();
            });

            var fontSize = chartProperties.fontSize;
            var lineSpacing = fontSize;
            var left = chartProperties.plotXMax + 10;

            // draw legend title
            ctx.font = fontSize.toString() + 'px sans-serif';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'top';
            ctx.fillStyle = 'rgb(0, 0, 0)';
            ctx.fillText('x = ' + Math.round(cursorX * 100) + '%', left, legendPlotY);

            // draw legend entries
            fns.forEach(function(item, index) {
                ctx.beginPath();
                ctx.arc(left + cursorPointRadius, legendPlotY + (lineSpacing * (index + 1)) + (fontSize / 2), cursorPointRadius, 0, 2 * Math.PI, false);
                ctx.fillStyle = fns[index].pointFill;
                ctx.fill();
                ctx.strokeStyle = fns[index].color; 
                ctx.setLineDash(fns[index].pointDash);
                ctx.stroke();

                ctx.fillStyle = 'rgb(0, 0, 0)';
                ctx.fillText(
                    roundToDecimalPlaces(item.unit.convTo(item.fn(cursorX)), 1) +
                    ' ' + item.unit.symbol +
                    (item.plotCursorPercentage != false ?
                        ' (' + Math.round(item.fn(cursorX) / chartProperties.fnsMax[index] * 100) + '%)' :
                        ''),
                    left + (cursorPointRadius * 2) + (fontSize / 2),
                    legendPlotY + (lineSpacing * (index + 1))
                );
            });

            ctx.restore();
        }

        function plotFns(ctx, chartProperties, fns) {
            ctx.save();

            fns.forEach(function(item, index) {
                var yScale = chartProperties.plotYScales[chartProperties.plotYScaleNames.indexOf(item.yScale)];

                ctx.beginPath();
                ctx.moveTo(chartProperties.plotX0,
                    chartProperties.plotY0 - (yScale * (item.fn(0))));

                for (var i = 1; chartProperties.plotX0 + i <= chartProperties.plotXMax; ++i) {
                    ctx.lineTo(chartProperties.plotX0 + i,
                        chartProperties.plotY0 - (yScale * chartProperties.fnsPoints[index][i]));
                }

                ctx.strokeStyle = item.color;
                ctx.lineWidth = item.lineWidth;
                ctx.setLineDash(item.dash);
                ctx.stroke();
            });

            ctx.restore();
        }

        function plotAxes(ctx, chartProperties, xLabel, yLabel) {
            ctx.save();

            ctx.beginPath();
            ctx.strokeStyle = 'rgb(0, 0, 0)'; 
            ctx.lineWidth = 2;

            // draw x axis
                       // miter properly with other axis
            ctx.moveTo(chartProperties.plotX0 - (ctx.lineWidth),
                       // completely outside chart
                       chartProperties.plotY0 + (ctx.lineWidth / 2));
                       // miter properly with cursor
            ctx.lineTo(chartProperties.plotXMax + (chartProperties.cursorLineWidth / 2),
                       // completely outside chart
                       chartProperties.plotY0 + (ctx.lineWidth / 2));
            ctx.stroke();

            // draw y axis
                       // completely outside chart
            ctx.moveTo(chartProperties.plotX0 - (ctx.lineWidth / 2),
                       // miter properly with other axis
                       chartProperties.plotY0 + (ctx.lineWidth));
                       // completely outside chart
            ctx.lineTo(chartProperties.plotX0 - (ctx.lineWidth / 2),
                       // miter properly with cursor
                       chartProperties.plotYMax - (chartProperties.cursorLineWidth / 2));
            ctx.stroke();

            var fontSize = chartProperties.fontSize;
            var axisLabelMargin = 10;
            ctx.font = fontSize.toString() + 'px sans-serif';
            ctx.textAlign = "center";
            ctx.fillStyle = 'rgb(0, 0, 0)';

            // draw x axis label
            ctx.fillText(xLabel, chartProperties.plotX0 + (chartProperties.w / 2), chartProperties.plotY0 + fontSize + axisLabelMargin);

            ctx.save();
            ctx.rotate(-Math.PI / 2);
            // draw y axis label
            ctx.fillText(yLabel, -chartProperties.plotYMax - (chartProperties.h / 2), chartProperties.marginLeft - axisLabelMargin);
            ctx.restore();

            ctx.restore();
        }

        function plotShuntedPot(args) {
            var rRef = (args && ('rRef' in args)) ?
                args.rRef :
                spinBoxRRef.getValueModel().getValue();
            var rRefTaper = (args && ('rRefTaper' in args)) ?
                args.rRefTaper :
                sliderRRefTaper.getValueModel().getValue();
            var rPot = (args && ('rPot' in args)) ?
                args.rPot :
                spinBoxRPot.getValueModel().getValue();
            var rTaper1 = (args && ('rTaper1' in args)) ?
                args.rTaper1 :
                spinBoxRTaper1.getValueModel().getValue();
            var rTaper2 = (args && ('rTaper2' in args)) ?
                args.rTaper2 :
                spinBoxRTaper2.getValueModel().getValue();
            var cursorX = (args && ('cursorX' in args)) ?
                args.cursorX :
                sliderCursorX.getValueModel().getValue();
            var plotError = (args && ('plotError' in args)) ?
                args.plotError :
                toggleButtonPlotError.getValueModel().getValue();

            var rModel = spinBoxRTaper1.getValueModel();
            var rUnit = rModel.getUnitTable()[rModel.getUnitIndex()];
            var fracModel = sliderRRefTaper.getValueModel();
            var fracUnit = fracModel.getUnitTable()[fracModel.getUnitIndex()];

            var fns = [
                {
                    fn: referenceTaperRout.bind(null, rRef, rRefTaper),
                    name: 'Reference R\u2092\u1d64\u209c',
                    color: 'rgb(0, 255, 0)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [5, 5],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit
                },
                {
                    fn: referenceTaperRin.bind(null, rRef),
                    name: 'Reference R\u1d62\u2099',
                    color: 'rgb(0, 255, 0)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [2, 2],
                    pointDash: [3, 3],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit
                },
                {
                    fn: referenceTaperVout.bind(null, rRef, rRefTaper),
                    name: 'Reference V\u2092\u1d64\u209c',
                    color: 'rgb(0, 255, 0)',
                    pointFill: 'rgb(0, 255, 0)',
                    dash: [],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale1',
                    unit: fracUnit,
                    plotCursorPercentage: false
                },
                {
                    fn: myTaperRout.bind(null, rPot, rTaper1, rTaper2),
                    name: 'Shunted R\u2092\u1d64\u209c',
                    color: 'rgb(0, 0, 255)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [5, 5],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit
                },
                {
                    fn: myTaperRin.bind(null, rPot, rTaper1, rTaper2),
                    name: 'Shunted R\u1d62\u2099',
                    color: 'rgb(0, 0, 255)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [2, 2],
                    pointDash: [3, 3],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit
                },
                {
                    fn: myTaperVout.bind(null, rPot, rTaper1, rTaper2),
                    name: 'Shunted V\u2092\u1d64\u209c',
                    color: 'rgb(0, 0, 255)',
                    pointFill: 'rgb(0, 0, 255)',
                    dash: [],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale1',
                    unit: fracUnit,
                    plotCursorPercentage: false
                }
            ]

            if (plotError == 'selected') {
                fns.push({
                    // Magnitude of error between Routs
                    fn: function(x) {
                        var mine = myTaperRout(rPot, rTaper1, rTaper2, x);
                        var ref = referenceTaperRout(rRef, rRefTaper, x);
                        return Math.abs(mine - ref);
                    },
                    name: 'R\u2092\u1d64\u209c Error',
                    color: 'rgb(255, 0, 0)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [5, 5],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit,
                    plotCursorPercentage: false
                });
                fns.push({
                    // Magnitude of error between Rins
                    fn: function(x) {
                        var mine = myTaperRin(rPot, rTaper1, rTaper2, x);
                        var ref = referenceTaperRin(rRef, x);
                        return Math.abs(mine - ref);
                    },
                    name: 'R\u1d62\u2099 Error',
                    color: 'rgb(255, 0, 0)',
                    pointFill: 'rgb(255, 255, 255)',
                    dash: [2, 2],
                    pointDash: [3, 3],
                    lineWidth: 2,
                    yScale: 'scale0',
                    unit: rUnit,
                    plotCursorPercentage: false
                });
                fns.push({
                    // Magnitude of error between Vouts
                    fn: function(x) {
                        var mine = myTaperVout(rPot, rTaper1, rTaper2, x);
                        var ref = referenceTaperVout(rRef, rRefTaper, x);
                        return Math.abs(mine - ref);
                    },
                    name: 'V\u2092\u1d64\u209c Error',
                    color: 'rgb(255, 0, 0)',
                    pointFill: 'rgb(255, 0, 0)',
                    dash: [],
                    pointDash: [],
                    lineWidth: 2,
                    yScale: 'scale1',
                    unit: fracUnit,
                    plotCursorPercentage: false
                });
            }

            plot(fns, cursorX);
        }

        function plotAuto(args) {
            if (toggleButtonAutoReplot.getValueModel().getValue() == 'selected')
                plotShuntedPot(args);
        }

        /*
         * Plot Button
         */
        var buttonPlot = chapatt.Button.new(document.getElementById('button-plot'), 1);
        buttonPlot.signalConnect('clicked', function() {
            plotShuntedPot();
        });

        /*
         * Auto-Replot ToggleButton
         */
        var toggleButtonAutoReplot = chapatt.ToggleButton.new(document.getElementById('toggle-button-auto-replot'));
        toggleButtonAutoReplot.getValueModel().signalConnect('valueChanged',
            function(targetWidget, signalName, signalData, userData) {
                if (signalData == 'selected')
                    plotShuntedPot();
            }
        );

        /*
         * Plot Error ToggleButton
         */
        var toggleButtonPlotError = chapatt.ToggleButton.new(document.getElementById('toggle-button-plot-error'));
        toggleButtonPlotError.getValueModel().signalConnect('valueChanged',
            function(targetWidget, signalName, signalData, userData) {
                plotShuntedPot({plotError: signalData});
            }
        );


        var fractionUnits = [
            chapatt.Unit.new('fraction', 'frac', identity, identity),
            chapatt.Unit.new('percent', '%',
                function(valueAsThis) {
                    return valueAsThis / 100;
                },
                function(valueAsDefault) {
                    return valueAsDefault * 100;
                }
            )
        ];
        /*
         * Cursor X Coordinate Slider
         */
        var sliderCursorX = chapatt.Slider.new(document.getElementById('slider-cursor-x'), fractionUnits, 0, 1);
        sliderCursorX.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
            plotAuto({cursorX: signalData});
        });


        function identity(obj) {
            return obj;
        }
        var resistanceUnits = [
            chapatt.Unit.new('ohm', 'R', identity, identity),
            chapatt.Unit.new('kilohm', 'k',
                function(valueAsThis) {
                    return valueAsThis * 1000;
                },
                function(valueAsDefault) {
                    return valueAsDefault / 1000;
                }
            ),
            chapatt.Unit.new('megaohm', 'M',
                function(valueAsThis) {
                    return valueAsThis * 1000000;
                },
                function(valueAsDefault) {
                    return valueAsDefault / 1000000;
                }
            )
        ];
        /*
         * Rpot SpinBox
         */
        var spinBoxRPot = chapatt.SpinBox.new(document.getElementById('spin-box-r-pot'), resistanceUnits);
        Object.assign(spinBoxRPot.getValueModel(), chapatt.Bounded);
        spinBoxRPot.getValueModel().setMinimum(0);
        spinBoxRPot.getValueModel().setMaximum(Infinity);
        spinBoxRPot.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
/*
            var rRefTaper = sliderRRefTaper.getValueModel().getValue();
            var newRTaper1 = (signalData - (signalData * rRefTaper)) / ((2 * rRefTaper) - 1)
            spinBoxRTaper1.getValueModel().setValue(newRTaper1);
*/
            plotAuto({rPot: signalData});
        });

        /*
         * Rtaper1 SpinBox
         */
        var spinBoxRTaper1 = chapatt.SpinBox.new(document.getElementById('spin-box-r-taper-1'), resistanceUnits);
        Object.assign(spinBoxRTaper1.getValueModel(), chapatt.Bounded);
        spinBoxRTaper1.getValueModel().setMinimum(0);
        spinBoxRTaper1.getValueModel().setMaximum(Infinity);
        spinBoxRTaper1.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
/*
            var rRefTaper = sliderRRefTaper.getValueModel().getValue();
            var newRPot = (signalData - (2 * signalData * rRefTaper)) / (rRefTaper - 1);
            spinBoxRPot.getValueModel().setValue(newRPot);
*/
                plotAuto({rTaper1: signalData});
        });

        /*
         * Rtaper2 SpinBox
         */
        var spinBoxRTaper2 = chapatt.SpinBox.new(document.getElementById('spin-box-r-taper-2'), resistanceUnits);
        Object.assign(spinBoxRTaper2.getValueModel(), chapatt.Bounded);
        spinBoxRTaper2.getValueModel().setMinimum(0);
        spinBoxRTaper2.getValueModel().setMaximum(Infinity);
        spinBoxRTaper2.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
                plotAuto({rTaper2: signalData});
        });

        /*
         * Constrain Taper ToggleButton
         */
        var toggleButtonConstrainTaper = chapatt.ToggleButton.new(document.getElementById('toggle-button-constrain-taper'));
        toggleButtonConstrainTaper.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
                plotAuto({constrainTaper: signalData});
            }
        );

        /*
         * Rref SpinBox
         */
        var spinBoxRRef = chapatt.SpinBox.new(document.getElementById('spin-box-r-ref'), resistanceUnits);
        Object.assign(spinBoxRRef.getValueModel(), chapatt.Bounded);
        spinBoxRRef.getValueModel().setMinimum(0);
        spinBoxRRef.getValueModel().setMaximum(Infinity);
        spinBoxRRef.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
                plotAuto({rRef: signalData});
        });

        /*
         * Rref taper characteristic Slider
         */
        var sliderRRefTaper = chapatt.Slider.new(document.getElementById('slider-r-ref-taper'), fractionUnits, 0, 1);
        sliderRRefTaper.getValueModel().signalConnect('valueChanged', function(targetWidget, signalName, signalData, userData) {
            plotAuto({rRefTaper: signalData});
        });

        /*
         * Instructions help box
         */
        var helpBox = document.getElementById('instructions');
        var helpButton = helpBox.getElementsByClassName('button')[0];

        helpButton.addEventListener('click', function() {
            var helpBox = document.getElementById('instructions');
            var helpContent = helpBox.getElementsByClassName('content')[0];

            if (helpContent.style.display === 'none')
                helpContent.style.display = 'block';
            else
                helpContent.style.display = 'none';
        });

        plotShuntedPot();
    });
  </script>

  <style type="text/css">
    /* disable font boosting */
    * {
      max-height: 9999999em;
    }

    body {
      font-size: 1em;
      font-family: sans-serif;
    }

    #chart {
        background-color: #ffffff;
    }

    label {
      white-space: nowrap;
    }

    .help-box {
      font-size: 0.75em;
      margin-bottom: 0.5em;
    }

    .help-box > .button {
      border-bottom-style: dotted; 
      border-bottom-width: 2px; 
      border-bottom-color: #000000; 
      cursor: pointer;
    }

    .help-box > .content {
      margin: 0.5em 0 0 0;
    }

    .help-tooltip {
      font-size: 0.75em;
      border-bottom-style: dotted; 
      border-bottom-width: 2px; 
      border-bottom-color: #000000; 
    }

    #bibliography {
      font-size: 0.75em;
    }

    ol#bibliography {
      counter-reset: bibliography;
      padding-left: 2em;
    }

    ol#bibliography > li {
      list-style-type: none;
      text-indent: -2em;
      margin-bottom: 0.25em;
    }

    ol#bibliography > li:before {
      content: "[" counter(bibliography) "] ";
      counter-increment: bibliography;
    }
  </style>
</head>
<body>
  <h1>Shunted Potentiometer Calculator</h1>

  <canvas id="chart" width="800" height="550" style="display: block"></canvas>

  <div id="instructions" class="help-box">
    <span class="button" title="Click to show/hide help">Help</span>
    <p class="content" style="display: none;">To change value in spinboxes and sliders, click arrows, scroll mouse wheel with cursor over control, click control and drag cursor up or down, or type value in box and press enter or click elsewhere. Optionally append an SI prefix to values (It is case-sensitive, e.g. 'm' means mili, 'M' means mega. 'u' means micro. The base unit symbol may be left off). The last unit used will be assumed for unsuffixed entries, and the increase/decrease functionality is scaled appropriately.</p>
  </div>

  <div id="button-plot" class="example-widget example-button">
    <div>Plot</div>
  </div>

  <div id="toggle-button-auto-replot" class="example-widget example-button example-toggle-button selected">
    <span>Auto-Replot</span>
  </div>

  <div id="toggle-button-plot-error" class="example-widget example-button example-toggle-button selected">
    <span>Plot Error</span>
  </div>

  <label>Cursor X
  <div id="slider-cursor-x" class="example-widget example-slider">
    <div class="bar" style="width: 50%;"></div>
    <div class="overlay">
      <div class="decrease">
        <div style="font-size: 0.6em;">&#x25c0;</div>
      </div>
      <div class="label">
        <div></div>
      </div>
      <div class="increase">
        <div style="font-size: 0.6em;">&#x25b6;</div>
      </div>
      <div class="field">
        <div contenteditable="true">50%</div>
      </div>
    </div>
  </div>
  </label>

  <br />

  <div style="border-style: solid; border-width: 2px; border-color: #0000ff; margin-bottom: 0.5em; padding: 0.5em;">
  <label>R<sub>pot</sub>
  <div id="spin-box-r-pot" class="example-widget example-spin-box">
    <div class="decrease">
      <div style="font-size: 0.6em;">&#x25c0;</div>
    </div>
    <div class="field">
      <div contenteditable="true">10k</div>
    </div>
    <div class="increase">
      <div style="font-size: 0.6em;">&#x25b6;</div>
    </div>
  </div>
  </label>

  <label>R<sub>taper1</sub>
  <div id="spin-box-r-taper-1" class="example-widget example-spin-box">
    <div class="decrease">
      <div style="font-size: 0.6em;">&#x25c0;</div>
    </div>
    <div class="field">
      <div contenteditable="true">2.2k</div>
    </div>
    <div class="increase">
      <div style="font-size: 0.6em;">&#x25b6;</div>
    </div>
  </div>
  </label>

  <label>R<sub>taper2</sub>
  <div id="spin-box-r-taper-2" class="example-widget example-spin-box">
    <div class="decrease">
      <div style="font-size: 0.6em;">&#x25c0;</div>
    </div>
    <div class="field">
      <div contenteditable="true">2.2k</div>
    </div>
    <div class="increase">
      <div style="font-size: 0.6em;">&#x25b6;</div>
    </div>
  </div>
  </label>

  <div id="toggle-button-constrain-taper" class="example-widget example-button example-toggle-button">
    <span>Constrain to R<sub>ref</sub> Taper</span>
  </div>
  </div>

  <div style="border-style: solid; border-width: 2px; border-color: #00ff00; margin-bottom: 0.5em; padding: 0.5em;">
  <label>R<sub>ref</sub>
  <div id="spin-box-r-ref" class="example-widget example-spin-box">
    <div class="decrease">
      <div style="font-size: 0.6em;">&#x25c0;</div>
    </div>
    <div class="field">
      <div contenteditable="true">1.6k</div>
    </div>
    <div class="increase">
      <div style="font-size: 0.6em;">&#x25b6;</div>
    </div>
  </div>
  </label>

  <label>Taper <span class="help-tooltip" title="Percent of maximum resistance at 50% rotation">(?)</span>
  <div id="slider-r-ref-taper" class="example-widget example-slider">
    <div class="bar" style="width: 80%;"></div>
    <div class="overlay">
      <div class="decrease">
        <div style="font-size: 0.6em;">&#x25c0;</div>
      </div>
      <div class="label">
        <div></div>
      </div>
      <div class="increase">
        <div style="font-size: 0.6em;">&#x25b6;</div>
      </div>
      <div class="field">
        <div contenteditable="true">80%</div>
      </div>
    </div>
  </div>
  </label>
  </div>

  <ol id="bibliography">
    <li>R. Keen, (1999). <em>The Secret Life of Pots</em> [Online]. Available: <a href="http://www.geofex.com/article_folders/potsecrets/potscret.htm">http://www.geofex.com/article_folders/potsecrets/potscret.htm</a></li>
    <li>R. Elliott, (2002, Jan. 22). <em>Beginners' Guide to Potentiometers</em> [Online]. Available: <a href="http://sound.whsites.net/pots.htm">http://sound.whsites.net/pots.htm</a></li>
    <li>R. Ives, "Characteristics of Shunted Potentiometers," <em>Audio</em>, February 1965, pp. 19-21, 1965 [Online]. Available: <a href="http://www.americanradiohistory.com/Archive-Audio/60s/Audio-1965-02.pdf">http://www.americanradiohistory.com/Archive-Audio/60s/Audio-1965-02.pdf</a></li>
  </ol>
</body>
</html>
